(()=>{var e={71:e=>{e.exports=function(){return this.wc.wcSettings}()}},t={};function n(a){var c=t[a];if(void 0!==c)return c.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};for(var c in(()=>{"use strict";n.r(a);const e=window.React,t=window.wp.htmlEntities;var c=n(71);const r="yith_paypal_payments_custom_card",o=window.wp.element,i=({isLoaded:t,components:{LoadingMask:n}})=>{const{cardNumberLabel:a,expirationDateLabel:c,cvvLabel:o}=yith_ppwc_card_settings;return(0,e.createElement)(n,{isLoading:!t,showSpinner:!0},(0,e.createElement)("div",{className:`wc-block-card-elements payment_method_${r}`},(0,e.createElement)("div",{className:"wc-block-gateway-container wc-card-number-element"},(0,e.createElement)("div",{id:"yith-ppwc-cc-card-number-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,e.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-card-number-block"},a),(0,e.createElement)("div",{id:"card-image"})),(0,e.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,e.createElement)("div",{id:"yith-ppwc-cc-expiration-date-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,e.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-expiration-date-block"},c)),(0,e.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,e.createElement)("div",{id:"yith-ppwc-cc-cvv-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,e.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-cvv-block"},o)),(0,e.createElement)("input",{type:"hidden",value:"",id:"yith_paypal_cc_payments-order-id"})))};function l(e,t){var n=[];return e.push({name:"security",value:t},{name:"flow",value:"checkout"}),jQuery.each(e,(function(e,t){n.push(t.name+"="+t.value)})),n.join("&")}const s=t=>{const[n,a]=(0,o.useState)(!1),[c,r]=(0,o.useState)(!1),{components:{LoadingMask:s},description:d,activePaymentMethod:p,emitResponse:m,eventRegistration:u}=t,{onPaymentSetup:y}=u,{threedsecure:h}=yith_ppwc_card_settings,w=(({billing:e,shippingData:t,eventRegistration:n})=>{const{ajaxUrl:a,liabilityList:c,threedsecure:r,ajaxNonce:i}=yith_ppwc_card_settings,[s,d]=(0,o.useState)(""),{onSubmit:p}=n;return{cardFieldsInstance:s,loadSDK:(0,o.useCallback)((()=>{const e=paypal.CardFields({style:{input:{"font-size":"15px","font-weight":"lighter",color:"#ccc",padding:"2.5em 1em 1em"},":focus":{color:"black"},".valid":{color:"black"},".invalid":{color:"black"}},createOrder:(e,t)=>fetch(a,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:l([{name:"request",value:"create_order"},{name:"checkoutRequest",value:"checkout"},{name:"orderID",value:""}],i)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw console.log("undefined",e.error),e.error;return document.querySelector("#yith_paypal_cc_payments-order-id").value=e.id,e.id})),onApprove:(e,t)=>{if(e&&e.orderID){if(r){let{liabilityShift:t}=e;if(void 0!==t&&(t=t.toLowerCase(),-1===c.indexOf(t))){if("unknown"===t)throw yith_ppwc_frontend.secure_3d_unknown;if("no"===t)throw yith_ppwc_frontend.secure_3d_no}}fetch(a,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:l([{name:"request",value:"approve_order"},{name:"orderID",value:e.orderID},{name:"checkoutRequest",value:"checkout"}])}).then((function(e){return e.json()})).then((function(e){e&&(e.redirect?window.location.href=e.redirect:e.result&&"failure"===e.result&&window.location.reload()),void 0!==p&&p()})).catch((e=>{throw e}))}}});return e.isEligible()&&(e.NumberField().render("#yith-ppwc-cc-card-number-block"),e.CVVField().render("#yith-ppwc-cc-cvv-block"),e.ExpiryField().render("#yith-ppwc-cc-expiration-date-block")),d(e),{cardFields:e}}),[])}})(t),{loadSDK:f}=w;return(0,o.useEffect)((()=>{let e;return function(){try{const{cardFields:t,orderID:n}=f();e=t,r(e),a(!0)}catch(e){console.log(e)}}(),()=>{a(!1),r(!1),e&&void 0!==e.onChange&&e?.teardown()}}),[f]),(0,o.useEffect)((()=>{if("yith_paypal_payments_custom_card"===p)return y((async()=>{if(!c)return{type:m.responseTypes.ERROR,messageContext:m.noticeContexts.PAYMENTS,message:yith_ppwc_frontend.errorMessage};try{const e={};let t=!1;return await c.submit().then((()=>{const t=document.querySelector("#yith_paypal_cc_payments-order-id");e["yith_paypal_cc_payments-order-id"]=jQuery(t).val()})).catch((e=>{t=e})),t?{type:m.responseTypes.ERROR,messageContext:m.noticeContexts.PAYMENTS,message:t.message}:{type:m.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}catch(e){return{type:m.responseTypes.ERROR,messageContext:m.noticeContexts.PAYMENTS,message:e}}}))}),[y,c,m.responseTypes.SUCCESS,m.responseTypes.ERROR,m.noticeContexts.PAYMENTS]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",null,d),(0,e.createElement)(s,{isLoading:!n,showSpinner:!0},(0,e.createElement)(i,{...t,isLoaded:a})))};var d;const{registerPaymentMethod:p}=wc.wcBlocksRegistry,m=(0,c.getPaymentMethodData)(r,{}),u=(0,t.decodeEntities)(m.title),y=(0,t.decodeEntities)(m.description),h=t=>{const{isEditing:n}=t;return n?null:(0,e.createElement)(s,{description:y,...t})};p({name:r,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{text:u}),(0,e.createElement)("span",{style:{marginLeft:"5px"}}))}),null),content:(0,e.createElement)(h,null),edit:(0,e.createElement)(h,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(d=m?.supports)&&void 0!==d?d:[]}})})(),a)this[c]=a[c];a.__esModule&&Object.defineProperty(this,"__esModule",{value:!0})})();